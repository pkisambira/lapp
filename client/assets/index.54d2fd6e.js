var V=Object.defineProperty;var f=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var S=(e,o,t)=>o in e?V(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,y=(e,o)=>{for(var t in o||(o={}))I.call(o,t)&&S(e,t,o[t]);if(f)for(var t of f(o))C.call(o,t)&&S(e,t,o[t]);return e};var $=(e,o)=>{var t={};for(var n in e)I.call(e,n)&&o.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&f)for(var n of f(e))o.indexOf(n)<0&&C.call(e,n)&&(t[n]=e[n]);return t};import{d as b,o as d,c as g,a,t as j,b as E,w as M,u as D,v as P,p as R,e as z,i as T,g as G,P as J,r as v,f as K,h as x,j as B,k as W,D as Y,l as F,m as H,n as U}from"./vendor.d6aab070.js";const X=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}};X();const Z={class:"w-1/3 py-20 shadow-lg relative",style:{"background-color":"rgb(245 245 245)"}},ee=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),te=[ee],oe={class:"flex flex-col items-center justify-center max-w-sm mx-auto"},se=a("div",{class:"w-full h-64 bg-gray-300 bg-center bg-cover rounded-lg shadow-md",style:{"background-image":"url(https://karvelifood.com/wp-content/uploads/2020/01/tbg.jpg)"}},null,-1),ne={class:"w-56 -mt-10 overflow-hidden bg-white rounded-lg shadow-lg md:w-64 dark:bg-gray-800"},ae={class:"py-2 font-bold tracking-wide text-center text-gray-800 uppercase dark:text-white"},re={class:"flex flex-col justify-between px-3 py-2 bg-gray-200 dark:bg-gray-700"},ce={class:"py-2 flex justify-between"},le=a("span",{class:"text-gray-500"},"Loyality Points",-1),ie={class:"rounded-full px-1 bg-slate-600 font-bold text-gray-300 dark:text-gray-200"},de=a("button",{class:"px-2 py-1 text-xs font-semibold text-white uppercase transition-colors duration-200 transform bg-gray-800 rounded hover:bg-gray-700 dark:hover:bg-gray-600 focus:bg-gray-700 dark:focus:bg-gray-600 focus:outline-none"}," Check Out Special offers ",-1),ue=b({props:{name:String,points:String},emits:["close"],setup(e,{emit:o}){function t(){o("close")}return(n,s)=>(d(),g("div",Z,[a("button",{class:"absolute h-6 w-8 -right-4 -top-4 bg-gray-400 rounded-full flex justify-center",onClick:t},te),a("div",oe,[se,a("div",ne,[a("h3",ae,j(e.name),1),a("div",re,[a("div",ce,[le,a("span",ie,j(e.points),1)]),de])])])]))}});var pe=(e,o)=>{const t=e.__vccOpts||e;for(const[n,s]of o)t[n]=s;return t};const L=e=>(R("data-v-fa6c25fa"),e=e(),z(),e),fe={class:"max-w-xs mx-auto overflow-hidden bg-white rounded-lg shadow-lg dark:bg-gray-800"},ge=L(()=>a("div",{style:{color:"red"},class:"frame"},null,-1)),_e=L(()=>a("div",{class:"py-5 text-center"},[a("span",{class:"text-sm text-gray-700 dark:text-gray-200"},"Scan QR")],-1)),he=b({emits:["decoded"],setup(e,{emit:o}){function t(n){o("decoded",n)}return(n,s)=>(d(),g("div",null,[a("div",fe,[E(D(P.exports.QrStream),{onDecode:t,class:"mb"},{default:M(()=>[ge]),_:1}),_e])]))}});var me=pe(he,[["__scopeId","data-v-fa6c25fa"]]);const ye={class:"flex flex-col items-center justify-center mt-20"},ve=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),xe=a("span",null,"Scan QR",-1),be=[ve,xe],we=b({setup(e){const t=T({apiKey:"AIzaSyBTWYVmUQWR9xYJ1IOJ05opsCq6ee2R8eA",authDomain:"loyality-9729c.firebaseapp.com",projectId:"loyality-9729c",storageBucket:"loyality-9729c.appspot.com",messagingSenderId:"223401866277",appId:"1:223401866277:web:e304f4441c3f1f9d003bcc",measurementId:"G-T2GT39VNED"});G(t);const n=J(),s=v(),r=v("start"),l=v(),q=K(()=>{var i,c;return((i=l.value)==null?void 0:i.firstname)+" "+((c=l.value)==null?void 0:c.lastname)});async function A(i){if(s.value=i,i.length>2){const c=W(F(n,"customers"),Y("qrcard","==",i)),p=await H(c),u=[];p.forEach(w=>{let _=w.data();const k=_,{points:N}=k,O=$(k,["points"]);let h=0;N.forEach(m=>{m.type=="award"?h+=parseInt(m.points):h-=parseInt(m.points)}),_=y({points:h},O);const Q=w.id;u.push(y({id:Q},_))}),u[0]&&(r.value="decoded"),l.value=u[0]}}return(i,c)=>{var p;return d(),g("div",ye,[r.value=="start"?(d(),g("button",{key:0,class:"inline-flex items-center px-6 py-2 text-sm text-green-100 bg-green-600 rounded hover:bg-green-700",onClick:c[0]||(c[0]=u=>r.value="decode")},be)):x("",!0),a("div",null,[r.value=="decode"?(d(),B(me,{key:0,onDecoded:A})):x("",!0)]),r.value=="decoded"?(d(),B(ue,{key:1,name:D(q),points:(p=l.value)==null?void 0:p.points,onClose:c[1]||(c[1]=u=>r.value="start")},null,8,["name","points"])):x("",!0)])}}});U(we).mount("#app");
